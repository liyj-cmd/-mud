# NARRATIVE BRANCHING（分支叙事规则）

## 分支目标
确保玩家选择带来长期差异，而不是只改一段日志。

## 分支层级
- 短分支：影响即时结果（受伤/得金/战斗）
- 中分支：影响任务状态与人物关系
- 长分支：影响阵营声望与章节走向

## 分支实现手段
主要使用事件 `effects`：
- `setFlags` / `removeFlags`
- `setQuestState` / `advanceQuest`
- `reputationDelta`
- `relationDelta`
- `timelineNote`
- `setChapter`

## 分支最小可见性要求
每个关键选项至少影响以下之一：
- 后续可触发事件集合
- 可见 NPC 或可谈内容
- 任务路径
- 章节文本

## 防分支爆炸策略
- 合流点：3-5 个事件后设计“条件合流节点”
- 分层：短分支多，长分支少
- 可追踪：每个长分支必须有旗标或任务状态标记

## 编写建议
- 先写状态图，再写文案。
- 先定义条件，再写奖励。
- 同一分支内不要同时改变过多系统，避免难调试。

## 测试建议
手工至少覆盖：
1. 善线选择集
2. 利己线选择集
3. 任务失败路径
4. 高声望和低声望入口差异
