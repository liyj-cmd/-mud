# QUEST DESIGN（任务设计规范）

## 任务目标
任务不是“给奖励按钮”，而是推动关系、世界和剧情分支变化。

## 任务模板
每个任务在设计时至少写出以下内容：
- 任务 ID
- 触发入口（地点/NPC/时间/条件）
- 关键状态（`questStates`）
- 成功路径
- 失败路径
- 中止/延期路径
- 奖励与代价
- 对应世界变化（声望/关系/时间线）

## 任务状态建议
常用状态值：
- `accepted`
- `reported`
- `completed`
- `failed`
- `paused`

## 条件设计原则
- 用数据条件而非 `GameScene` 硬编码。
- 多使用 `requiredQuestStates` 和 `blockedQuestStates` 管理阶段。
- 尽量将任务入口设计成“至少两个”，避免卡死。

## 奖励设计原则
- 奖励必须和叙事一致。
- 除经验/潜能外，优先增加：
  - 阵营声望变化
  - 关键 NPC 关系变化
  - 世界时间线记录

## 失败设计原则
- 失败不是死路，应提供补救或替代路径。
- 失败也要写 `timelineNote`，让世界“记住你失败过”。

## 当前任务线示例
- `heimu_secret`（掌门密令线）
- `kaifeng_bounty`（开封缉盗线）
- `dali_medicine`（大理求药线）

## 新增任务前检查
1. 是否有唯一且稳定的任务 ID。
2. 是否定义了至少一个失败分支。
3. 是否写入了世界影响（声望/关系/timeline）。
4. 是否通过 `worldValidation`。
